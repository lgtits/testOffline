import{_ as B,a as I,b as O}from"./FilterBlockSide.badb062a.js";import{d as h,k as z,l as k,_ as w,m as D,o as _,p as R,w as E,g as c,aK as G,t as f,r as l,e as $,F as U,aH as H,h as K,j as M,aL as P,q as y,f as J,v as Q}from"./index.125062c9.js";import{S as u}from"./OnlineSearchServices.6a0a51e0.js";import"./QPagination.d30dffdc.js";import"./format.65fd2131.js";import"./QSelect.72862115.js";import"./QItemSection.574b5d90.js";import"./QItemLabel.e1e9f191.js";import"./QPopupProxy.c8bfa67b.js";import"./QExpansionItem.e7bc8664.js";const W=h({name:"ComponentCard",props:{uuid:{type:String,required:!0},component:{type:Object,required:!0}},setup(){const e="http://portal_api.stg.kuku.succ.work",{locale:m}=z({useScope:"global"});return k(()=>{}),{baseURL:e,locale:m}}}),X={class:"component-info"},Y={class:"part-number"},Z={class:"part-name"},x={class:"manufacturer-name cursor-pointer"};function ee(e,m,a,g,s,i){const n=D("router-link");return _(),R(n,{to:`/${e.$i18n.locale}/component/${e.component.data_key}`,class:"component-card"},{default:E(()=>[c("div",{class:"component-img cursor-pointer",style:G({backgroundImage:`url('${e.baseURL}/${e.component.img_path}')`,backgroundSize:"cover"})},null,4),c("div",X,[c("div",Y,f(e.component.partNumber),1),c("div",Z,f(e.component.name),1),c("div",x,f(e.component.manufacturer),1)])]),_:1},8,["to"])}var A=w(W,[["render",ee]]);const te=h({name:"ComponentBlock",props:{uuid:{type:String,required:!0},components:{type:Array,required:!0}},components:{ComponentCard:A},setup(){const e=l();return k(()=>{}),{inputText:e}}}),oe={class:"result-cards"};function ne(e,m,a,g,s,i){const n=A;return _(),$("div",oe,[(_(!0),$(U,null,H(e.components,r=>(_(),R(n,{key:r.data_key,component:r,uuid:e.uuid},null,8,["component","uuid"]))),128))])}var L=w(te,[["render",ne]]);const se=h({name:"ComponentPage",components:{FilterBlockSide:B,ResultSumSort:I,ComponentBlock:L,Pagination:O},setup(){const e=K(),m=M(),a=P({sortRules:[],nowSort:""}),g=l(""),s=P({currentPage:1,dataPerPage:10,lastPage:15,maxPage:5}),i=P({}),n=l(""),r=l(e.name?e.name.toString():""),p=l([]),d=l(0),C=l(!1),q=async()=>{const o=await u.getSortRules(r.value,n.value);a.sortRules=o.result,a.nowSort=o.result[0].sort_object,g.value=o.result[0].sort_name},b=async()=>{if(n.value=localStorage.getItem("uuid")||"",!n.value){m.replace({name:"index"});return}await q();const o=await u.getSearchResults(r.value,n.value,a.nowSort,s.currentPage);p.value=o.result.components,d.value=o.result.totalAmount,s.lastPage=o.result.page.lastPage,Q.keyword=o.keyword,await V(),C.value=!0},j=async o=>{s.currentPage=o;const t=await u.getSearchResults(r.value,n.value,a.nowSort,s.currentPage,i);p.value=t.result.components},N=async o=>{for(let S in o)i[S]=o[S];const t=await u.getSearchResults(r.value,n.value,a.nowSort,s.currentPage,i);p.value=t.result.components,d.value=t.result.totalAmount,s.lastPage=t.result.page.lastPage},T=async o=>{a.nowSort=o;const t=await u.getSearchResults(r.value,n.value,a.nowSort,s.currentPage,i);p.value=t.result.components,d.value=t.result.totalAmount,s.lastPage=t.result.page.lastPage},v=l([]),V=async()=>{let o=(await u.getSearchFilter("component",n.value)).result;v.value=o,v.value&&v.value.forEach(async t=>{const S=await u.getSearchFilterObject("component",t.filter_object,n.value),F=u.processFilterList(S.result);t.isTyping=!1,t.input="",t.addInput="",t.content=F,t.ogContent=F,t.isTree=!!t.content[0].layer})};return k(()=>{b()}),{filter:s,components:p,totalAmount:d,uuid:n,sort:a,defaultSort:g,filterObjects:v,isLoaded:C,getPageResult:j,getFilterResult:N,pageInit:b,setSort:T}}}),ae={class:"components"},re={class:"sidebar"},ue={class:"content"},le={class:"result-block"};function ce(e,m,a,g,s,i){const n=B,r=I,p=L,d=O;return _(),$("div",ae,[c("div",re,[y(n,{page:"component",onFilterResult:e.getFilterResult,onPageInit:e.pageInit,filterObjects:e.filterObjects},null,8,["onFilterResult","onPageInit","filterObjects"])]),c("div",ue,[c("div",le,[e.isLoaded?(_(),R(r,{key:0,totalAmount:e.totalAmount,sort:e.sort,onSetSort:e.setSort,defaultSort:e.defaultSort},null,8,["totalAmount","sort","onSetSort","defaultSort"])):J("",!0),y(p,{components:e.components,uuid:e.uuid},null,8,["components","uuid"]),y(d,{currentPage:e.filter.currentPage,lastPage:e.filter.lastPage,onGoPage:e.getPageResult},null,8,["currentPage","lastPage","onGoPage"])])])])}var ye=w(se,[["render",ce],["__scopeId","data-v-15692551"]]);export{ye as default};
